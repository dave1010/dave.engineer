---
layout: base.njk
---
{% set redirectUrl = externalUrl %}
{% set externalSource = externalSourceInfo %}
{% set externalSourceMessage = "This post lives on another site." %}
{% if externalSource and externalSource.message %}
  {% set externalSourceMessage = externalSource.message %}
{% endif %}
{% set externalCtaLabel = "Read externally" %}
{% if externalSource and externalSource.ctaLabel %}
  {% set externalCtaLabel = externalSource.ctaLabel %}
{% endif %}
{% if redirectUrl %}
  {% set headExtra %}
    <meta http-equiv="refresh" content="0; url={{ redirectUrl | escape }}">
    <meta name="robots" content="noindex">
    <link rel="canonical" href="{{ redirectUrl | escape }}">
  {% endset %}
{% endif %}
<main class="px-3 py-8 sm:px-5 sm:py-10">
  {% set tagLinkClasses = [
    "inline-flex items-center gap-2",
    "rounded-full border border-slate-700/60 bg-slate-900/60",
    "px-3 py-1 text-xs font-semibold tracking-wide text-slate-300",
    "transition hover:border-slate-600 hover:text-slate-100"
  ] | join(" ") %}
  <article
    class="blog-post mx-auto flex max-w-3xl flex-col gap-10 rounded-3xl border border-slate-800/60 bg-slate-900/40 px-3 py-8 sm:px-5 sm:py-6"
  >
    <header class="space-y-4">
      <a class="text-sm font-medium uppercase tracking-wide text-slate-400 hover:text-slate-200" href="/blog/">Blog</a>
      <h1 class="text-4xl font-semibold tracking-tight text-slate-100">{{ title }}</h1>
      <p class="text-base text-slate-400">
        <time datetime="{{ isoDate }}">{{ displayDate }}</time>
      </p>
      {% if topicTagLinks and topicTagLinks | length %}
      <ul class="flex flex-wrap gap-2">
        {% for tag in topicTagLinks %}
        <li>
          <a class="{{ tagLinkClasses }}" href="{{ tag.url }}">{{ tag.name | lower }}</a>
        </li>
        {% endfor %}
      </ul>
      {% elseif topicTags and topicTags | length %}
      <ul class="flex flex-wrap gap-2">
        {% for tag in topicTags %}
        <li>
          <span class="{{ tagLinkClasses }}">{{ tag | lower }}</span>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
    </header>
    <div class="space-y-6 rounded border border-amber-400/30 bg-amber-400/10 p-6 text-amber-100">
      <p class="text-lg font-medium">{{ externalSourceMessage }}</p>
      <p class="text-base text-amber-50/80">
        {% if excerpt %}
          {{ excerpt }}
        {% else %}
          You're being redirected to read it there.
        {% endif %}
      </p>
      {% if redirectUrl %}
      <a
        class="inline-flex items-center gap-2 rounded-md bg-amber-500 px-4 py-2 text-sm font-semibold text-slate-900 transition hover:bg-amber-400"
        href="{{ redirectUrl }}"
        rel="noopener noreferrer"
        target="_blank"
      >
        {{ externalCtaLabel }}
        <span aria-hidden="true">â†—</span>
      </a>
      {% endif %}
    </div>
    {% if content | trim %}
    <div class="prose prose-invert prose-lg max-w-none">
      {{ content | safe }}
    </div>
    {% endif %}
  </article>
</main>
